# Koyeb deployment manifest for backend service
# Deploy with: koyeb apps deploy -f koyeb.yaml

app: graficadora
services:
  - name: backend
    type: web
    runtime: docker
    docker:
      dockerfile: backend/Dockerfile
      context: .
    ports:
      - port: 3000
        protocol: http
    env:
      - key: DATABASE_URL
        value: ${DATABASE_URL}
      - key: SUPABASE_AUTH_CALLBACK_URL
        value: ${SUPABASE_AUTH_CALLBACK_URL}
    scalings:
      - type: auto
        min: 1
        max: 1
    healthcheck:
      http_get:
        path: /health
        port: 3000
        interval: 30s
        timeout: 5s
        failure_threshold: 3
